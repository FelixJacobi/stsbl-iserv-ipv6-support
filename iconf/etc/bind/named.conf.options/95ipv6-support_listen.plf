#!/usr/bin/perl -CSDAL

my @ips = sort split "\n", qx(netquery6 --global --lan --format "ip/length;"; netquery6 --uniquelocal --format "ip/length;");
push @ips, "::1/128;";
my $out = join " ", @ips;

while (my $line = <STDIN>)
{
  if ($line =~ /\s*listen-on-v6 \{ \}\;/)
  {
    print "        listen-on-v6 { $out };\n";
  }
  else
  {
    print $line;
  }
}
